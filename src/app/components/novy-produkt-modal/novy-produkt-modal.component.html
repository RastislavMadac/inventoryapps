<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Nový Produkt</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="zrusit()">Zavrieť</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <form (ngSubmit)="ulozit()">
    
    <h3 style="font-size: 0.9rem; color: gray; margin-bottom: 10px;">Informácie o produkte</h3>

    <ion-item fill="outline" class="ion-margin-bottom">
      <ion-label position="floating">Názov produktu *</ion-label>
      <ion-input [(ngModel)]="produkt.nazov" name="nazov" required></ion-input>
    </ion-item>

    <ion-item fill="outline" class="ion-margin-bottom">
      <ion-label position="floating">EAN Kód</ion-label>
      <ion-input [(ngModel)]="produkt.ean" name="ean"></ion-input>
      <ion-button slot="end" fill="clear">
        <ion-icon name="barcode-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-item>

    <ion-item fill="outline" class="ion-margin-bottom">
      <ion-label position="floating">Kategória</ion-label>
      <ion-select [(ngModel)]="produkt.kategoria_id" name="kategoria_id" interface="popover">
        <ion-select-option *ngFor="let kat of kategorie" [value]="kat.id">
          {{ kat.nazov }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <h3 style="font-size: 0.9rem; color: gray; margin-top: 20px; margin-bottom: 10px;">Umiestnenie na sklade</h3>
    
    <div style="display: flex; gap: 10px; margin-bottom: 16px;">
      
      <ion-item fill="outline" style="flex: 1;">
        <ion-label position="floating">Sklad</ion-label>
        <ion-select [(ngModel)]="vybranySkladId" name="sklad_id" (ionChange)="onSkladChange()" interface="popover">
          <ion-select-option *ngFor="let s of sklady" [value]="s.id">
            {{ s.nazov }}
          </ion-select-option>
        </ion-select>
        <ion-icon slot="end" name="add-circle-outline" color="primary" 
                  style="margin-top: 15px; cursor: pointer;"
                  (click)="$event.stopPropagation(); otvoritNovuLokaciu()"></ion-icon>
      </ion-item>

      <ion-item fill="outline" style="flex: 1;">
        <ion-label position="floating">Regál</ion-label>
        <ion-select [(ngModel)]="vybranyRegalId" name="regal_id" [disabled]="!vybranySkladId" interface="popover">
          <ion-select-option *ngFor="let r of regaly" [value]="r.id">
            {{ r.nazov }}
          </ion-select-option>
        </ion-select>
        <ion-icon slot="end" name="add-circle-outline" color="primary"
                  style="margin-top: 15px; cursor: pointer;"
                  (click)="$event.stopPropagation(); otvoritNovuLokaciu()"></ion-icon>
      </ion-item>

    </div>

    <div style="display: flex; gap: 10px;">
      <ion-item fill="outline" style="flex: 1;">
        <ion-label position="floating">Jednotka</ion-label>
        <ion-select [(ngModel)]="produkt.jednotka" name="jednotka">
          <ion-select-option value="ks">ks</ion-select-option>
          <ion-select-option value="kg">kg</ion-select-option>
          <ion-select-option value="l">l</ion-select-option>
          <ion-select-option value="m">m</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item fill="outline" style="flex: 1;">
        <ion-label position="floating">Balenie (ks)</ion-label>
        <ion-input type="number" [(ngModel)]="produkt.balenie_ks" name="balenie_ks"></ion-input>
      </ion-item>
    </div>

    <ion-button expand="block" type="submit" class="ion-margin-top" [disabled]="!produkt.nazov">
      Vytvoriť produkt
    </ion-button>

  </form>

</ion-content>